<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Travel Translator Pro</title>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* All existing styles remain unchanged */
        
        /* Additional style for API key settings */
        :root {
            --primary: #3A86FF;
            --primary-dark: #2667C9;
            --secondary: #4ECDC4;
            --accent: #FF5E5B;
            --dark: #2B2D42;
            --light: #F8F9FA;
            --gray: #8D99AE;
            --success: #43AA8B;
            --warning: #F9C74F;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #EEF2FF 0%, #CFD8E3 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
        }

        header h1 {
            color: var(--primary);
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }

        .card {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            margin: 25px 0;
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .card h3 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .translator-card {
            position: relative;
            overflow: hidden;
        }

        .translator-card::before {
            content: '';
            position: absolute;
            top: -40px;
            right: -40px;
            width: 150px;
            height: 150px;
            background: var(--secondary);
            opacity: 0.1;
            border-radius: 50%;
            z-index: 0;
        }

        .translator-card::after {
            content: '';
            position: absolute;
            bottom: -60px;
            left: -60px;
            width: 200px;
            height: 200px;
            background: var(--primary);
            opacity: 0.05;
            border-radius: 50%;
            z-index: 0;
        }

        .lang-selector {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
            position: relative;
            z-index: 1;
        }

        .lang-select {
            flex: 1;
            padding: 12px 18px;
            border-radius: 10px;
            border: 2px solid rgba(58, 134, 255, 0.2);
            background: var(--light);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%233A86FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 45px;
        }

        .lang-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }

        .lang-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .swap-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.4s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(58, 134, 255, 0.3);
        }

        .swap-btn:hover {
            transform: rotate(180deg);
            background: var(--primary-dark);
        }

        .input-container {
            position: relative;
            margin: 25px 0;
            z-index: 1;
        }

        .voice-btn {
            background: var(--primary);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            position: absolute;
            right: 15px;
            bottom: 15px;
            z-index: 2;
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.3);
            font-size: 1.2rem;
        }

        .voice-btn:hover {
            transform: scale(1.1);
        }

        .voice-btn.listening {
            animation: pulse 1.5s infinite;
            background: var(--accent);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 94, 91, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(255, 94, 91, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 94, 91, 0);
            }
        }

        .translation-area {
            min-height: 150px;
            border: 2px solid rgba(58, 134, 255, 0.2);
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            position: relative;
            background: var(--light);
            transition: all 0.3s;
            font-size: 1.1rem;
            word-wrap: break-word;
            overflow-y: auto;
            max-height: 300px;
        }

        .translation-area:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }

        .translation-result {
            min-height: 150px;
            border: 2px solid rgba(78, 205, 196, 0.3);
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            position: relative;
            background: var(--light);
            transition: all 0.3s;
        }

        [contenteditable="true"]:empty:before {
            content: attr(data-placeholder);
            color: var(--gray);
            cursor: text;
            opacity: 0.7;
        }

        .action-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 2;
        }

        .action-btn {
            background: rgba(255,255,255,0.9);
            border: 1px solid var(--primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .phrases-section {
            position: relative;
        }

        .category-tabs {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 5px;
        }

        .category-tab {
            padding: 8px 15px;
            background: rgba(58, 134, 255, 0.1);
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .category-tab.active {
            background: var(--primary);
            color: white;
        }

        .phrases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .phrase-card {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid var(--secondary);
            display: flex;
            flex-direction: column;
            gap: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.03);
        }

        .phrase-card:hover {
            transform: translateY(-3px);
            background: rgba(78, 205, 196, 0.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .phrase-text {
            font-weight: 500;
        }

        .phrase-category {
            font-size: 0.8rem;
            color: var(--gray);
            background: rgba(141, 153, 174, 0.1);
            padding: 3px 8px;
            border-radius: 12px;
            width: fit-content;
        }

        .history-card {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            padding: 15px;
            margin: 10px 0;
            background: var(--light);
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .history-item:hover {
            border-left-color: var(--primary);
            background: rgba(58, 134, 255, 0.05);
        }

        .history-text {
            flex: 1;
        }

        .history-original {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .history-translation {
            color: var(--gray);
            font-style: italic;
        }

        .history-time {
            color: var(--gray);
            font-size: 0.8rem;
            white-space: nowrap;
            margin-left: 15px;
        }

        .history-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .history-action {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 3px;
            border-radius: 3px;
            transition: all 0.3s;
        }

        .history-action:hover {
            color: var(--primary);
            background: rgba(58, 134, 255, 0.1);
        }

        .cultural-notes {
            background: rgba(249, 199, 79, 0.1);
            padding: 12px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 3px solid var(--warning);
            font-size: 0.95rem;
        }

        .pronunciation {
            background: rgba(58, 134, 255, 0.07);
            padding: 8px 12px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
            font-family: monospace;
            color: var(--primary-dark);
            display: inline-block;
        }

        .alternatives {
            margin-top: 15px;
        }

        .alternatives h4 {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .alt-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .alt-item {
            background: rgba(58, 134, 255, 0.07);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .alt-item:hover {
            background: rgba(58, 134, 255, 0.15);
        }

        .loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 12px;
            backdrop-filter: blur(2px);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(58, 134, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(255, 94, 91, 0.1);
            color: var(--accent);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid var(--accent);
            margin: 15px 0;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .settings-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 100;
        }

        .settings-btn:hover {
            transform: rotate(30deg);
        }

        .settings-panel {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 300px;
            z-index: 99;
        }

        .settings-panel.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .setting-group {
            margin-bottom: 15px;
        }

        .setting-group h4 {
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .theme-options {
            display: flex;
            gap: 8px;
        }

        .theme-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .theme-option.active {
            transform: scale(1.1);
            border-color: var(--dark);
        }

        .theme-blue {
            background: linear-gradient(135deg, #3A86FF 0%, #5E60CE 100%);
        }

        .theme-green {
            background: linear-gradient(135deg, #4ECDC4 0%, #2BAE66 100%);
        }

        .theme-purple {
            background: linear-gradient(135deg, #9F7AEA 0%, #D53F8C 100%);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .setting-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .setting-toggle span {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .setting-footer {
            margin-top: 15px;
            text-align: right;
        }

        .save-settings {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .save-settings:hover {
            background: var(--primary-dark);
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px 0;
            color: var(--gray);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .card {
                padding: 15px;
            }
            
            .lang-selector {
                flex-direction: column;
            }
            
            .swap-btn {
                transform: rotate(90deg);
                margin: 5px 0;
            }
            
            .swap-btn:hover {
                transform: rotate(270deg);
            }
            
            .phrases-grid {
                grid-template-columns: 1fr;
            }
            
            .category-tabs {
                padding-bottom: 10px;
            }
            
            .settings-panel {
                width: calc(100% - 40px);
                right: 50%;
                transform: translateX(50%);
            }
        }

        .offline-mode {
            background: rgba(249, 199, 79, 0.1);
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 3px solid var(--warning);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .offline-icon {
            color: var(--warning);
            font-size: 1.2rem;
        }

        .recognition-status {
            position: absolute;
            top: -25px;
            left: 0;
            font-size: 0.85rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
            opacity: 0;
        }

        .recognition-status.active {
            opacity: 1;
        }

        .recognition-status i {
            animation: pulse 1.5s infinite;
        }

        .recently-used {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .recent-item {
            background: rgba(58, 134, 255, 0.08);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .recent-item:hover {
            background: rgba(58, 134, 255, 0.15);
        }


        .api-key-section {
            margin: 15px 0;
            border-top: 1px solid rgba(141, 153, 174, 0.2);
            padding-top: 15px;
        }
        
        .api-key-input {
            width: 100%;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--gray);
            margin-top: 5px;
            margin-bottom: 10px;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        .api-status {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
        }
        
        .api-status.connected {
            color: var(--success);
        }
        
        .api-status.disconnected {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <!-- All existing HTML remains unchanged until settings panel -->
    <div class="container">
        <header data-aos="fade-down">
            <h1><i class="fas fa-language"></i> AI Travel Translator Pro</h1>
            <p>Break language barriers with our advanced AI-powered translation tool. Perfect for travelers, language learners, and global communicators.</p>
        </header>
        
        <div class="card translator-card" data-aos="fade-up">
            <div class="lang-selector">
                <div class="lang-group" style="flex: 1;">
                    <label class="lang-label">Translate from:</label>
                    <select id="sourceLang" class="lang-select" data-aos="fade-right">
                        <option value="auto">Detect Language</option>
                        <option value="en">English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ja">Japanese</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="ko">Korean</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                
                <button class="swap-btn" id="swapBtn" data-aos="zoom-in">
                    <i class="fas fa-exchange-alt"></i>
                </button>
                
                <div class="lang-group" style="flex: 1;">
                    <label class="lang-label">Translate to:</label>
                    <select id="targetLang" class="lang-select" data-aos="fade-left">
                        <option value="es">Spanish</option>
                        <option value="en">English</option>                        
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ja">Japanese</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="ko">Korean</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
            </div>

            <div class="input-container">
                <div class="recognition-status" id="recognitionStatus">
                    <i class="fas fa-microphone"></i> Listening...
                </div>
                <div class="voice-btn" id="voiceBtn" title="Click to start voice translation">
                    <i class="fas fa-microphone"></i>
                </div>
                <div id="inputText" contenteditable="true" 
                     data-placeholder="Speak or type here to translate..." 
                     class="translation-area"></div>
            </div>

            <div class="recently-used">
                <span style="color: var(--gray); font-size: 0.9rem;">Recently used:</span>
                <div class="recent-item">Hello, how are you?</div>
                <div class="recent-item">Where is the restaurant?</div>
                <div class="recent-item">How much does it cost?</div>
            </div>

            <div id="outputContainer" class="translation-result" data-aos="flip-up">
                <div class="action-buttons">
                    <div class="tooltip">
                        <button class="action-btn" id="copyBtn" title="Copy translation">
                            <i class="far fa-copy"></i>
                        </button>
                        <span class="tooltip-text">Copy</span>
                    </div>
                    <div class="tooltip">
                        <button class="action-btn" id="speakBtn" title="Listen to translation">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <span class="tooltip-text">Listen</span>
                    </div>
                    <div class="tooltip">
                        <button class="action-btn" id="favoriteBtn" title="Save to favorites">
                            <i class="far fa-heart"></i>
                        </button>
                        <span class="tooltip-text">Favorite</span>
                    </div>
                </div>
                <div id="output">
                    <p class="placeholder-text" style="color: var(--gray); font-style: italic;">Your translation will appear here...</p>
                </div>
            </div>
        </div>

        <div class="card phrases-section" data-aos="fade-up">
            <h3><i class="fas fa-comments"></i> Common Travel Phrases</h3>
            
            <div class="category-tabs">
                <div class="category-tab active" data-category="all">All</div>
                <div class="category-tab" data-category="Essential">Essential</div>
                <div class="category-tab" data-category="Emergency">Emergency</div>
                <div class="category-tab" data-category="Shopping">Shopping</div>
                <div class="category-tab" data-category="Navigation">Navigation</div>
                <div class="category-tab" data-category="Dining">Dining</div>
                <div class="category-tab" data-category="Greetings">Greetings</div>
                <div class="category-tab" data-category="Accommodation">Accommodation</div>
            </div>
            
            <div class="phrases-grid" id="commonPhrases"></div>
        </div>

        <div class="card history-card" data-aos="fade-up">
            <h3><i class="fas fa-history"></i> Translation History</h3>
            <div id="translationHistory">
                <!-- History items will be populated here -->
            </div>
        </div>

        <div class="offline-mode">
            <div class="offline-icon">
                <i class="fas fa-cloud-download-alt"></i>
            </div>
            <div>
                <strong>Offline mode available!</strong> Download language packs for translation without an internet connection.
            </div>
        </div>
    </div>

    <div class="settings-btn" id="settingsBtn">
        <i class="fas fa-cog"></i>
    </div>

    

    <div class="settings-panel" id="settingsPanel">
        <div class="setting-group">
            <h4>Theme</h4>
            <div class="theme-options">
                <div class="theme-option theme-blue active" data-theme="blue"></div>
                <div class="theme-option theme-green" data-theme="green"></div>
                <div class="theme-option theme-purple" data-theme="purple"></div>
            </div>
        </div>

        <div class="api-key-section">
            <h4>Gemini API Settings</h4>
            <p style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;"></p>
                Enter your Gemini API key to enable AI translation
            </p>
            <label for="apiKey" style="font-size: 0.9rem; color: var(--dark);">API Key:</label>
            <input type="password" id="apiKey" class="api-key-input" placeholder="Enter your Gemini API key">
            <div id="apiStatus" class="api-status disconnected">
                <i class="fas fa-circle"></i> Not connected
            </div>
            <button id="verifyApiKey" class="save-settings" style="margin-top: 10px;">Verify API Key</button>
        </div>

        <div class="setting-group">
            <h4>Interface</h4>
            <div class="setting-toggle">
                <span>Auto Speech Recognition</span>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-toggle">
                <span>Auto-play pronunciation</span>
                <label class="toggle-switch">
                    <input type="checkbox">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-toggle">
                <span>Save history</span>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-toggle">
                <span>Show cultural notes</span>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>
        
        <div class="setting-group">
            <h4>Offline Languages</h4>
            <div class="setting-toggle">
                <span>Spanish</span>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-toggle">
                <span>French</span>
                <label class="toggle-switch">
                    <input type="checkbox">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>
        
        <div class="setting-footer">
            <button class="save-settings">Save Settings</button>
        </div>
    </div>

    <footer>
        <p>© 2025 AI Travel Translator Pro | <a href="#" style="color: var(--primary);">Privacy Policy</a> | <a href="#" style="color: var(--primary);">Terms of Service</a></p>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true
        });
        
        class AdvancedTranslator {
            constructor() {
                this.phrases = {
                    en: [
                        { text: "Where's the bathroom?", category: "Essential" },
                        { text: "How much does this cost?", category: "Shopping" },
                        { text: "I need a doctor", category: "Emergency" },
                        { text: "Where is the embassy?", category: "Navigation" },
                        { text: "I'm allergic to peanuts", category: "Dietary" },
                        { text: "Could I see the menu, please?", category: "Dining" },
                        { text: "Good morning", category: "Greetings" },
                        { text: "Thank you very much", category: "Essential" },
                        { text: "I don't understand", category: "Essential" },
                        { text: "Do you speak English?", category: "Essential" },
                        { text: "I'd like to check in, please", category: "Accommodation" },
                        { text: "Could you help me?", category: "Essential" },
                        { text: "Where is the nearest ATM?", category: "Navigation" },
                        { text: "What time does it open?", category: "Essential" },
                        { text: "Can I have the bill, please?", category: "Dining" }
                    ],
                    es: [
                        { text: "¿Dónde está el baño?", category: "Essential" },
                        { text: "¿Cuánto cuesta esto?", category: "Shopping" },
                        { text: "Necesito un médico", category: "Emergency" },
                        { text: "¿Dónde está la embajada?", category: "Navigation" },
                        { text: "Soy alérgico a los cacahuetes", category: "Dietary" },
                        { text: "¿Podría ver el menú, por favor?", category: "Dining" },
                        { text: "Buenos días", category: "Greetings" },
                        { text: "Muchas gracias", category: "Essential" },
                        { text: "No entiendo", category: "Essential" },
                        { text: "¿Habla inglés?", category: "Essential" },
                        { text: "Me gustaría hacer el check-in, por favor", category: "Accommodation" },
                        { text: "¿Podría ayudarme?", category: "Essential" },
                        { text: "¿Dónde está el cajero automático más cercano?", category: "Navigation" },
                        { text: "¿A qué hora abre?", category: "Essential" },
                        { text: "¿Puede traerme la cuenta, por favor?", category: "Dining" }
                    ],
                    fr: [
                        { text: "Où sont les toilettes?", category: "Essential" },
                        { text: "Combien ça coûte?", category: "Shopping" },
                        { text: "J'ai besoin d'un médecin", category: "Emergency" },
                        { text: "Où est l'ambassade?", category: "Navigation" },
                        { text: "Je suis allergique aux arachides", category: "Dietary" },
                        { text: "Pourrais-je voir le menu, s'il vous plaît?", category: "Dining" },
                        { text: "Bonjour", category: "Greetings" },
                        { text: "Merci beaucoup", category: "Essential" },
                        { text: "Je ne comprends pas", category: "Essential" },
                        { text: "Parlez-vous anglais?", category: "Essential" },
                        { text: "Je voudrais m'enregistrer, s'il vous plaît", category: "Accommodation" },
                        { text: "Pourriez-vous m'aider?", category: "Essential" },
                        { text: "Où est le distributeur le plus proche?", category: "Navigation" },
                        { text: "À quelle heure est-ce que ça ouvre?", category: "Essential" },
                        { text: "L'addition, s'il vous plaît", category: "Dining" }
                    ]
                };
                
                this.favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                this.history = JSON.parse(localStorage.getItem('translationHistory')) || [];
                this.recentlyUsed = JSON.parse(localStorage.getItem('recentlyUsed')) || [];
                this.currentCategory = 'all';
                this.apiKey = localStorage.getItem('geminiApiKey') || '';
                
                this.initSpeech();
                this.bindEvents();
                this.loadCommonPhrases();
                this.updateHistory();
                this.updateRecentlyUsed();
                this.initApiKey();
            }

            initApiKey() {
                const apiKeyInput = document.getElementById('apiKey');
                const apiStatus = document.getElementById('apiStatus');
                
                if (this.apiKey) {
                    apiKeyInput.value = this.apiKey;
                    this.updateApiStatus(true);
                }
            }

            updateApiStatus(isConnected) {
                const apiStatus = document.getElementById('apiStatus');
                
                if (isConnected) {
                    apiStatus.innerHTML = '<i class="fas fa-circle"></i> Connected';
                    apiStatus.classList.remove('disconnected');
                    apiStatus.classList.add('connected');
                } else {
                    apiStatus.innerHTML = '<i class="fas fa-circle"></i> Not connected';
                    apiStatus.classList.remove('connected');
                    apiStatus.classList.add('disconnected');
                }
            }

            verifyApiKey(apiKey) {
                return new Promise((resolve, reject) => {
                    // Simple test request to Gemini API to verify the key works
                    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const requestBody = {
                        contents: [{
                            parts: [{
                                text: "Simple test. Please respond with 'API working'."
                            }]
                        }]
                    };
                    
                    fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`API request failed with status ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        if (data && data.candidates && data.candidates[0]) {
                            resolve(true);
                        } else {
                            reject(new Error('Invalid API response format'));
                        }
                    })
                    .catch(error => {
                        reject(error);
                    });
                });
            }

            initSpeech() {
                // Check if SpeechRecognition is available
                if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                    this.recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'en-US';

                    this.recognition.onresult = (e) => {
                        const transcript = Array.from(e.results)
                            .map(result => result[0])
                            .map(result => result.transcript)
                            .join('');
                        this.updateInput(transcript);
                    };

                    this.recognition.onstart = () => {
                        document.getElementById('recognitionStatus').classList.add('active');
                        document.getElementById('voiceBtn').classList.add('listening');
                    };

                    this.recognition.onerror = (e) => {
                        this.showError('Speech recognition error: ' + e.error);
                        document.getElementById('recognitionStatus').classList.remove('active');
                        document.getElementById('voiceBtn').classList.remove('listening');
                    };

                    this.recognition.onend = () => {
                        document.getElementById('recognitionStatus').classList.remove('active');
                        document.getElementById('voiceBtn').classList.remove('listening');
                    };
                } else {
                    // Handle the case where speech recognition is not supported
                    document.getElementById('voiceBtn').style.display = 'none';
                    this.showError('Speech recognition is not supported in your browser.');
                }
            }

            async translate(text) {
                if (!text.trim()) return;
                
                if (!this.apiKey) {
                    this.showError('Please enter a valid Gemini API key in settings');
                    document.getElementById('settingsPanel').classList.add('active');
                    return;
                }
                
                try {
                    this.showLoading(true);
                    const sourceLang = document.getElementById('sourceLang').value;
                    const targetLang = document.getElementById('targetLang').value;
                    
                    const response = await this.callGeminiAPI(text, sourceLang, targetLang);
                    this.showTranslation(response);
                    this.addToHistory(text, response.translation);
                    this.addToRecentlyUsed(text);
                } catch (error) {
                    this.showError('Translation failed: ' + error.message);
                } finally {
                    this.showLoading(false);
                }
            }

            async callGeminiAPI(text, sourceLang, targetLang) {
                const sourceLanguage = this.getLanguageName(sourceLang);
                const targetLanguage = this.getLanguageName(targetLang);
                
                const prompt = `
                Translate the following text from ${sourceLang === 'auto' ? 'the detected language' : sourceLanguage} to ${targetLanguage}.
                
                Text to translate: "${text}"
                
                Please provide the response in JSON format with the following structure:
                {
                    "translation": "the translated text",
                    "pronunciation": "phonetic pronunciation guide",
                    "detectedLanguage": ${sourceLang === 'auto' ? '"the detected language"' : 'null'},
                    "culturalNotes": "any relevant cultural context or notes about the translation",
                    "alternatives": ["alternative translation 1", "alternative translation 2", "alternative translation 3"]
                }
                
                Only respond with the JSON object, no additional text.
                `;
                
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${this.apiKey}`;
                
                const requestBody = {
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.2,
                        maxOutputTokens: 1024
                    }
                };
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.candidates || !data.candidates[0] || !data.candidates[0].content || !data.candidates[0].content.parts) {
                    throw new Error('Invalid API response format');
                }
                
                const responseText = data.candidates[0].content.parts[0].text;
                
                try {
                    // Extract JSON from the response (handling potential text before/after JSON)
                    const jsonMatch = responseText.match(/\{[\s\S]*\}/);
                    if (!jsonMatch) {
                        throw new Error('Could not parse JSON from API response');
                    }
                    
                    const translationData = JSON.parse(jsonMatch[0]);
                    
                    // Ensure response has the required fields
                    if (!translationData.translation) {
                        throw new Error('Invalid translation data structure');
                    }
                    
                    return {
                        translation: translationData.translation,
                        pronunciation: translationData.pronunciation || "Not available",
                        detectedLanguage: translationData.detectedLanguage,
                        culturalNotes: translationData.culturalNotes || "No cultural notes available for this translation.",
                        alternatives: translationData.alternatives || []
                    };
                } catch (error) {
                    console.error("Error parsing JSON:", error);
                    
                    // Fallback to simple extraction if JSON parsing fails
                    return {
                        translation: responseText.replace(/```json|```/g, '').trim(),
                        pronunciation: "Not available",
                        detectedLanguage: sourceLang === 'auto' ? this.getLanguageName('en') : null,
                        culturalNotes: "No cultural notes available for this translation.",
                        alternatives: []
                    };
                }
            }

            getLanguageName(code) {
                const languages = {
                    'en': 'English',
                    'es': 'Spanish',
                    'fr': 'French',
                    'de': 'German',
                    'it': 'Italian',
                    'pt': 'Portuguese',
                    'ja': 'Japanese',
                    'zh': 'Chinese',
                    'ko': 'Korean',
                    'ru': 'Russian',
                    'ar': 'Arabic',
                    'auto': 'Auto-detect'
                };
                return languages[code] || code;
            }

            showTranslation(result) {
                const output = document.getElementById('output');
                
                let detectedLanguageHtml = '';
                if (result.detectedLanguage) {
                    detectedLanguageHtml = `
                        <div style="margin-bottom: 10px; font-size: 0.9rem; color: var(--gray);">
                            <i class="fas fa-language"></i> Detected language: <strong>${result.detectedLanguage}</strong>
                        </div>
                    `;
                }
                
                output.innerHTML = `
                    ${detectedLanguageHtml}
                    <h3 style="color: var(--dark); margin-bottom: 10px;">${result.translation}</h3>
                    
                    <div class="pronunciation">
                        <i class="fas fa-volume-up" style="margin-right: 5px;"></i> ${result.pronunciation}
                    </div>
                    
                    <div class="cultural-notes">
                        <i class="fas fa-info-circle"></i> ${result.culturalNotes}
                    </div>
                    
                    <div class="alternatives">
                        <h4>Alternative translations:</h4>
                        <div class="alt-list">
                            ${result.alternatives.map(alt => `<div class="alt-item">${alt}</div>`).join('')}
                        </div>
                    </div>
                `;
                
                // Add click event to alternative translations
                document.querySelectorAll('.alt-item').forEach(item => {
                    item.addEventListener('click', () => {
                        output.querySelector('h3').textContent = item.textContent;
                    });
                });
            }

            addToHistory(original, translation) {
                const timestamp = new Date();
                
                this.history.unshift({ 
                    original, 
                    translation,
                    date: timestamp.toISOString(),
                    sourceLang: document.getElementById('sourceLang').value,
                    targetLang: document.getElementById('targetLang').value
                });
                
                // Keep history limited to 20 items
                if (this.history.length > 20) this.history.pop();
                
                // Save to local storage
                localStorage.setItem('translationHistory', JSON.stringify(this.history));
                this.updateHistory();
            }

            addToRecentlyUsed(text) {
                // Don't add duplicates
                const exists = this.recentlyUsed.findIndex(item => item === text);
                if (exists !== -1) {
                    this.recentlyUsed.splice(exists, 1);
                }
                
                // Add to beginning of array
                this.recentlyUsed.unshift(text);
                
                // Keep limited to 5 items
                if (this.recentlyUsed.length > 5) this.recentlyUsed.pop();
                
                // Save to local storage
                localStorage.setItem('recentlyUsed', JSON.stringify(this.recentlyUsed));
                this.updateRecentlyUsed();
            }

            updateRecentlyUsed() {
                const container = document.querySelector('.recently-used');
                
                if (!this.recentlyUsed.length) {
                    container.style.display = 'none';
                    return;
                }
                
                container.style.display = 'flex';
                
                // Clear existing items except the label
                while (container.children.length > 1) {
                    container.removeChild(container.lastChild);
                }
                
                // Add new items
                this.recentlyUsed.forEach(text => {
                    const item = document.createElement('div');
                    item.className = 'recent-item';
                    item.textContent = text.length > 20 ? text.substring(0, 20) + '...' : text;
                    item.addEventListener('click', () => {
                        this.updateInput(text);
                        this.translate(text);
                    });
                    container.appendChild(item);
                });
            }

            updateHistory() {
                const historyDiv = document.getElementById('translationHistory');
                
                if (!this.history.length) {
                    historyDiv.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No translation history yet</p>';
                    return;
                }
                
                historyDiv.innerHTML = this.history.map(item => `
                    <div class="history-item">
                        <div class="history-text">
                            <div class="history-original">${item.original}</div>
                            <div class="history-translation">${item.translation}</div>
                            <div class="history-actions">
                                <button class="history-action" data-action="copy">
                                    <i class="far fa-copy"></i> Copy
                                </button>
                                <button class="history-action" data-action="speak">
                                    <i class="fas fa-volume-up"></i> Speak
                                </button>
                                <button class="history-action" data-action="delete">
                                    <i class="far fa-trash-alt"></i> Delete
                                </button>
                            </div>
                        </div>
                        <div class="history-time">
                            ${this.formatTime(new Date(item.date))}
                        </div>
                    </div>
                `).join('');
                
                // Add event listeners for history actions
                document.querySelectorAll('.history-action').forEach((btn, index) => {
                    const action = btn.getAttribute('data-action');
                    const historyItem = this.history[Math.floor(index / 3)]; // 3 buttons per history item
                    
                    btn.addEventListener('click', () => {
                        switch(action) {
                            case 'copy':
                                navigator.clipboard.writeText(historyItem.translation);
                                this.showNotification('Copied to clipboard');
                                break;
                            case 'speak':
                                this.speakText(historyItem.translation, historyItem.targetLang);
                                break;
                            case 'delete':
                                this.deleteHistoryItem(Math.floor(index / 3));
                                break;
                        }
                    });
                });
            }
            
            deleteHistoryItem(index) {
                this.history.splice(index, 1);
                localStorage.setItem('translationHistory', JSON.stringify(this.history));
                this.updateHistory();
            }

            formatTime(date) {
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMins / 60);
                const diffDays = Math.floor(diffHours / 24);
                
                if (diffMins < 1) return 'Just now';
                if (diffMins < 60) return `${diffMins}m ago`;
                if (diffHours < 24) return `${diffHours}h ago`;
                if (diffDays < 7) return `${diffDays}d ago`;
                
                return date.toLocaleDateString();
            }

            loadCommonPhrases() {
                const sourceLang = document.getElementById('sourceLang').value;
                const phrasesContainer = document.getElementById('commonPhrases');
                const phrases = this.phrases[sourceLang === 'auto' ? 'en' : sourceLang] || this.phrases.en;
                
                phrasesContainer.innerHTML = phrases
                    .filter(phrase => this.currentCategory === 'all' || phrase.category === this.currentCategory)
                    .map(phrase => `
                        <div class="phrase-card" data-category="${phrase.category}">
                            <div class="phrase-text">${phrase.text}</div>
                            <div class="phrase-category">${phrase.category}</div>
                        </div>
                    `).join('');

                document.querySelectorAll('.phrase-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const text = card.querySelector('.phrase-text').textContent;
                        this.updateInput(text);
                        this.translate(text);
                    });
                });
            }


            // All other methods remain unchanged

            bindEvents() {
                // Existing event bindings from the original code
                
                // Additional event handlers for API key verification
                document.getElementById('verifyApiKey').addEventListener('click', async () => {
                    const apiKeyInput = document.getElementById('apiKey');
                    const apiKey = apiKeyInput.value.trim();
                    
                    if (!apiKey) {
                        this.showError('Please enter an API key');
                        return;
                    }
                    
                    try {
                        this.showLoading(true);
                        await this.verifyApiKey(apiKey);
                        this.apiKey = apiKey;
                        localStorage.setItem('geminiApiKey', apiKey);
                        this.updateApiStatus(true);
                        this.showNotification('API key verified and saved');
                    } catch (error) {
                        this.showError('API key verification failed: ' + error.message);
                        this.updateApiStatus(false);
                    } finally {
                        this.showLoading(false);
                    }
                });
                
                // Voice button
                document.getElementById('voiceBtn').addEventListener('click', () => this.toggleRecognition());
                
                // Swap languages button
                document.getElementById('swapBtn').addEventListener('click', () => this.swapLanguages());
                
                // Copy translation button
                document.getElementById('copyBtn').addEventListener('click', () => this.copyTranslation());
                
                // Speak translation button
                document.getElementById('speakBtn').addEventListener('click', () => this.speakTranslation());
                
                // Favorite button
                document.getElementById('favoriteBtn').addEventListener('click', () => this.toggleFavorite());
                
                // Input field
                document.getElementById('inputText').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.translate(e.target.textContent);
                    }
                });
                
                // Input field blur event for delayed translation
                document.getElementById('inputText').addEventListener('blur', (e) => {
                    const text = e.target.textContent.trim();
                    if (text && text.length > 2) {
                        this.translate(text);
                    }
                });

                // Language selection change
                document.querySelectorAll('.lang-select').forEach(select => {
                    select.addEventListener('change', () => {
                        if (select.id === 'sourceLang') {
                            this.loadCommonPhrases();
                        }
                        
                        // Translate current input if it exists
                        const inputText = document.getElementById('inputText').textContent.trim();
                        if (inputText) {
                            this.translate(inputText);
                        }
                    });
                });
                
                // Category tabs
                document.querySelectorAll('.category-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelector('.category-tab.active').classList.remove('active');
                        tab.classList.add('active');
                        this.currentCategory = tab.getAttribute('data-category');
                        this.loadCommonPhrases();
                    });
                });
                
                // Settings button
                document.getElementById('settingsBtn').addEventListener('click', () => {
                    document.getElementById('settingsPanel').classList.toggle('active');
                });
                
                // Theme options
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelector('.theme-option.active').classList.remove('active');
                        option.classList.add('active');
                        this.changeTheme(option.getAttribute('data-theme'));
                    });
                });
                
                // Save settings button
                document.querySelector('.save-settings').addEventListener('click', () => {
                    document.getElementById('settingsPanel').classList.remove('active');
                    this.showNotification('Settings saved successfully');
                });
                
                // Close settings when clicking outside
                document.addEventListener('click', (e) => {
                    const settingsPanel = document.getElementById('settingsPanel');
                    const settingsBtn = document.getElementById('settingsBtn');
                    
                    if (settingsPanel.classList.contains('active') && 
                        !settingsPanel.contains(e.target) && 
                        e.target !== settingsBtn && 
                        !settingsBtn.contains(e.target)) {
                        settingsPanel.classList.remove('active');
                    }
                });
            }

            // Keep all remaining methods the same
        

        toggleRecognition() {
                if (!this.recognition) return;
                
                if (this.recognition.active) {
                    this.recognition.stop();
                } else {
                    try {
                        this.recognition.start();
                    } catch (error) {
                        this.showError('Could not start speech recognition: ' + error.message);
                    }
                }
            }

            swapLanguages() {
                const source = document.getElementById('sourceLang');
                const target = document.getElementById('targetLang');
                
                // Skip if source is set to auto-detect
                if (source.value === 'auto') {
                    this.showNotification('Cannot swap when source is set to auto-detect');
                    return;
                }
                
                [source.value, target.value] = [target.value, source.value];
                this.loadCommonPhrases();
                
                // Translate current input if it exists
                const inputText = document.getElementById('inputText').textContent.trim();
                if (inputText) {
                    this.translate(inputText);
                }
            }

            updateInput(text) {
                const input = document.getElementById('inputText');
                input.textContent = text;
            }

            speakTranslation() {
                const translationText = document.querySelector('#output h3')?.textContent;
                if (!translationText) return;
                
                this.speakText(translationText, document.getElementById('targetLang').value);
            }
            
            speakText(text, langCode) {
                if (!text) return;
                
                // Check if speech synthesis is supported
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = langCode || document.getElementById('targetLang').value;
                    speechSynthesis.speak(utterance);
                } else {
                    this.showError('Speech synthesis is not supported in your browser.');
                }
            }

            copyTranslation() {
                const text = document.querySelector('#output h3')?.textContent;
                if (!text) return;
                
                navigator.clipboard.writeText(text)
                    .then(() => this.showNotification('Copied to clipboard'))
                    .catch(err => this.showError('Could not copy text: ' + err));
            }
            
            toggleFavorite() {
                const translationText = document.querySelector('#output h3')?.textContent;
                if (!translationText) return;
                
                const favoriteBtn = document.getElementById('favoriteBtn');
                const icon = favoriteBtn.querySelector('i');
                
                if (icon.classList.contains('far')) {
                    // Add to favorites
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    this.favorites.push({
                        text: translationText,
                        date: new Date().toISOString()
                    });
                    this.showNotification('Added to favorites');
                } else {
                    // Remove from favorites
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    this.favorites = this.favorites.filter(fav => fav.text !== translationText);
                    this.showNotification('Removed from favorites');
                }
                
                localStorage.setItem('favorites', JSON.stringify(this.favorites));
            }
            
            changeTheme(theme) {
                const root = document.documentElement;
                
                switch(theme) {
                    case 'blue':
                        root.style.setProperty('--primary', '#3A86FF');
                        root.style.setProperty('--primary-dark', '#2667C9');
                        root.style.setProperty('--secondary', '#4ECDC4');
                        root.style.setProperty('--accent', '#FF5E5B');
                        break;
                    case 'green':
                        root.style.setProperty('--primary', '#2BAE66');
                        root.style.setProperty('--primary-dark', '#1D9650');
                        root.style.setProperty('--secondary', '#FCF6B1');
                        root.style.setProperty('--accent', '#F77F00');
                        break;
                    case 'purple':
                        root.style.setProperty('--primary', '#9F7AEA');
                        root.style.setProperty('--primary-dark', '#805AD5');
                        root.style.setProperty('--secondary', '#F687B3');
                        root.style.setProperty('--accent', '#ED64A6');
                        break;
                }
            }

            showLoading(show) {
                const outputContainer = document.getElementById('outputContainer');
                let loader = document.querySelector('.loading');
                
                if (show) {
                    if (!loader) {
                        loader = document.createElement('div');
                        loader.className = 'loading';
                        loader.innerHTML = '<div class="spinner"></div>';
                        outputContainer.appendChild(loader);
                    }
                } else {
                    if (loader) {
                        loader.remove();
                    }
                }
            }

            showError(message) {
                const output = document.getElementById('output');
                output.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i>
                        ${message}
                    </div>
                `;
            }
            
            showNotification(message) {
                // Create notification element if it doesn't exist
                let notification = document.getElementById('notification');
                if (!notification) {
                    notification = document.createElement('div');
                    notification.id = 'notification';
                    notification.style.cssText = `
                        position: fixed;
                        bottom: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: var(--dark);
                        color: white;
                        padding: 10px 20px;
                        border-radius: 20px;
                        font-size: 0.9rem;
                        z-index: 1000;
                        opacity: 0;
                        transition: opacity 0.3s;
                    `;
                    document.body.appendChild(notification);
                }
                
                // Update text and show
                notification.textContent = message;
                notification.style.opacity = '1';
                
                // Hide after delay
                clearTimeout(this.notificationTimeout);
                this.notificationTimeout = setTimeout(() => {
                    notification.style.opacity = '0';
                }, 2000);
            }
        }



        // Initialize translator when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const translator = new AdvancedTranslator();
        });
    </script>
</body>
</html>
